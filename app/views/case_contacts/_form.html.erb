<%= form_with(model: case_contact, local: true, id: "casa-contact-form") do |form| %>
  <%= render "/shared/error_messages", resource: case_contact %>

  <div class="field casa-case form-group card card-container">
    <div class="card-body">
      <h2><label for="case_contact_casa_case"><%= t(".case_label") %></label></h2>
      <% casa_cases.each_with_index do |casa_case, index| %>
        <div class="form-check">
          <%= check_box_tag "case_contact[casa_case_id][]",
                            casa_case.id,
                            @selected_cases.include?(casa_case),
                            id: "case_contact_casa_case_id_#{index}",
                            class: ["form-check-input", "casa-case-id"],
                            disabled: case_contact.persisted? %>
          <label class="form-check-label" for="case_contact_casa_case_id_<%= index %>">
            <%= casa_case.case_number %>
          </label>
        </div>
      <% end %>
    </div>
  </div>

<div class="field form-group card card-container">
  <div class="card-body">
    <%= render "contact_types",
        form: form,
        model: @case_contact,
        contact_type_groups:  @current_organization_groups,
        selected_case_contact_types: @selected_case_contact_types,
        checkbox_tag_name: "case_contact[case_contact_contact_type_attributes][][contact_type_id]" %>
  </div>
</div>

<div class="field form-group card card-container">
  <div class="card-body">
    <%= render "contact_details",
        form: form,
        model: @case_contact,
        case_contact: case_contact
        %>
  </div>
</div>

<div class="field form-group card card-container">
  <div class="card-body">
    <h2>4. Enter Travel Details</h2>
    <div class="miles-driven">
      <h2><%= form.label :miles_driven, "a. Miles Driven" %></h2>
      <%= form.number_field :miles_driven, class: "form-control", required: true, min: "0", max: 10000 %>
    </div>
    <% if current_organization.show_driving_reimbursement %>
      <div class="want-driving-reimbursement">
        <h2><%= form.label :want_driving_reimbursement, "b. Want Driving Reimbursement" %></h2>
        <%= form.select :want_driving_reimbursement,
                        options_for_select([['Yes', true], ['No', false]], case_contact.want_driving_reimbursement),
                        {},
                        class: "custom-select" %>
      </div>
    <% end %>
  </div>
</div>

  <div class="field notes form-group card card-container">
    <div class="card-body"> 
      <h2><%= form.label :notes, "5. Notes" %></h2>
      <i><%= t("forms.case_contact.notes_notice") %></i>
      <%= form.text_area :notes, :rows => 5, placeholder: t("forms.case_contact.notes_placeholder"), class: "form-control" %>
    </div>
  </div>

  <div class="actions">
    <%= form.submit t("button.submit"), class: "btn btn-primary", id: "case-contact-submit",
"data-target": "#confirm-submit" %>
  </div>
  <%= render 'confirm_note_content_dialog', form: form %>
<% end %>
